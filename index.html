<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- CRITICAL FOR MOBILE: Prevents zooming and sets proper scale -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <title>AI Chat with your idol</title>
    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&family=Plus+Jakarta+Sans:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>

    <div id="device">
      <div class="notch"></div>

      <!-- 1. WELCOME -->
      <div id="welcome-screen" class="screen active">
        <div class="welcome-text">
          <h1>Chat With Your Bias.</h1>
          <p style="opacity: 0.9; font-size: 1.1rem; margin-top: 10px">
            The AI chatting experience
          </p>
        </div>
        <button class="cta-btn" onclick="openSelection()">
          Start Matching
        </button>
      </div>

      <!-- 2. SELECTION -->
      <div id="selection-screen" class="screen">
        <div class="header">
          <h2>Discovery</h2>
          <div
            style="
              width: 32px;
              height: 32px;
              background: var(--primary-gradient);
              border-radius: 10px;
            "
          ></div>
        </div>
        <div class="grid-container" id="grid">
          <!-- Javascript fills this -->
        </div>
      </div>

      <!-- 3. CHAT -->
      <div id="chat-screen" class="screen">
        <div class="chat-nav">
          <button class="back-icon" onclick="switchScreen('selection-screen')">
            ‚Üê
          </button>
          <img id="active-avatar" src="" class="chat-avatar-small" />
          <div class="chat-status">
            <h3 id="active-name">Name</h3>
            <div class="status-text">
              <span class="active-dot"></span>Online
            </div>
          </div>

          <!-- NEW: LOVE METER -->
          <div class="love-container">
            <span
              style="font-size: 0.7rem; font-weight: bold; color: #ff4757"
              id="love-score"
              >0%</span
            >
            <div class="love-heart">
              <div class="love-fill" id="love-fill"></div>
              <!-- SVG Outline Overlay -->
              <svg
                viewBox="0 0 24 24"
                style="
                  position: absolute;
                  inset: 0;
                  fill: none;
                  stroke: #ff4757;
                  stroke-width: 2;
                "
              >
                <path
                  d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
                ></path>
              </svg>
            </div>
          </div>
        </div>

        <div class="messages-area" id="messages"></div>

        <div class="typing-bubble" id="typing">
          <div class="dot"></div>
          <div class="dot"></div>
          <div class="dot"></div>
        </div>

        <div class="input-zone">
          <!-- 1. HIDDEN FILE INPUT -->
          <input
            type="file"
            id="image-upload"
            accept="image/*"
            style="display: none"
            onchange="handleImageUpload()"
          />

          <!-- 2. PAPERCLIP ICON BUTTON -->
          <label for="image-upload" class="attach-btn" title="Send Photo">
            <!-- SVG Paperclip -->
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path
                d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"
              ></path>
            </svg>
          </label>

          <div class="input-wrapper">
            <input
              type="text"
              class="chat-input"
              id="user-input"
              placeholder="Type a message..."
              autocomplete="off"
            />
          </div>

          <button class="send-btn" onclick="sendMessage()">
            <svg viewBox="0 0 24 24">
              <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
    <script src="script.js"></script>
  </body>
</html>
